head	1.5;
access;
symbols
	rel-0-3:1.1.1.1 open:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2001.09.17.03.58.39;	author goodger;	state dead;
branches;
next	1.4;

1.4
date	2001.09.13.02.15.58;	author goodger;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.07.02.05.22;	author goodger;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.23.03.55.34;	author goodger;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.22.22.36.04;	author goodger;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.07.22.22.36.04;	author goodger;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Moved out of DPS package into test directory.
@
text
@#! /usr/bin/env python

"""
:Author: David Goodger
:Contact: goodger@@users.sourceforge.net
:Revision: $Revision: 1.4 $
:Date: $Date: 2001/09/13 02:15:58 $
:Copyright: This module has been placed in the public domain.

Test module for nodes.py.
"""

import unittest, sys, re
import nodes

debug = 0


class TextTests(unittest.TestCase):

    def setUp(self):
        self.text = nodes.Text('Line 1.\nLine 2.')

    def test_repr(self):
        self.assertEquals(repr(self.text), r"<#text: 'Line 1.\nLine 2.'>")

    def test_str(self):
        self.assertEquals(str(self.text), 'Line 1.\nLine 2.')

    def test_asdom(self):
        dom = self.text.asdom()
        self.assertEquals(dom.toxml(), 'Line 1.\nLine 2.')
        dom.unlink()

    def test_astext(self):
        self.assertEquals(self.text.astext(), 'Line 1.\nLine 2.')

    def test_pformat(self):
        self.assertEquals(self.text.pformat(), 'Line 1.\nLine 2.\n')


class ElementTests(unittest.TestCase):

    def test_empty(self):
        element = nodes._Element()
        self.assertEquals(repr(element), '<_Element: >')
        self.assertEquals(str(element), '<_Element/>')
        dom = element.asdom()
        self.assertEquals(dom.toxml(), '<_Element/>')
        dom.unlink()
        element['attr'] = '1'
        self.assertEquals(repr(element), '<_Element: >')
        self.assertEquals(str(element), '<_Element attr="1"/>')
        dom = element.asdom()
        self.assertEquals(dom.toxml(), '<_Element attr="1"/>')
        dom.unlink()
        self.assertEquals(element.pformat(), '<_Element attr="1">\n')

    def test_withtext(self):
        element = nodes._Element('text\nmore', nodes.Text('text\nmore'))
        self.assertEquals(repr(element), r"<_Element: <#text...>>")
        self.assertEquals(str(element), '<_Element>text\nmore</_Element>')
        dom = element.asdom()
        self.assertEquals(dom.toxml(), '<_Element>text\nmore</_Element>')
        dom.unlink()
        element['attr'] = '1'
        self.assertEquals(repr(element), r"<_Element: <#text...>>")
        self.assertEquals(str(element),
                          '<_Element attr="1">text\nmore</_Element>')
        dom = element.asdom()
        self.assertEquals(dom.toxml(),
                          '<_Element attr="1">text\nmore</_Element>')
        dom.unlink()
        self.assertEquals(element.pformat(),
"""\
<_Element attr="1">
    text
    more
""")


if __name__ == '__main__':
#    sys.argv.extend(['-v'])             # uncomment for verbose output
#    sys.argv.extend(['-v', '-d'])       # uncomment for very verbose output
    if sys.argv[-1] == '-d':
        debug = 1
        del sys.argv[-1]
    # When this module is executed from the command-line, run all its tests
    unittest.main()
@


1.4
log
@updated
@
text
@d6 2
a7 2
:Revision: $Revision: 1.3 $
:Date: $Date: 2001/09/07 02:05:22 $
@


1.3
log
@updated
@
text
@d6 2
a7 2
:Revision: $Revision: 1.2 $
:Date: $Date: 2001/08/23 03:55:34 $
d57 1
a57 1
        self.assertEquals(element.pformat(), '<_Element attr="1"/>\n')
a78 1
</_Element>
@


1.2
log
@updated
@
text
@d6 2
a7 2
:Revision: $Revision: 1.1.1.1 $
:Date: $Date: 2001/07/22 22:36:04 $
d38 2
a39 2
    def test_pprint(self):
        self.assertEquals(self.text.pprint(), 'Line 1.\nLine 2.\n')
d57 1
a57 1
        self.assertEquals(element.pprint(), '<_Element attr="1"/>\n')
d74 1
a74 1
        self.assertEquals(element.pprint(),
@


1.1
log
@Initial revision
@
text
@d4 5
a8 5
Author: David Goodger
Contact: dgoodger@@bigfoot.com
Revision: $Revision: 1.1 $
Date: $Date: 2001/07/20 00:01:27 $
Copyright: This module has been placed in the public domain.
@


1.1.1.1
log
@First Imported.
@
text
@@
