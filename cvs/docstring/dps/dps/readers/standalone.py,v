head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2002.04.13.17.06.49;	author goodger;	state Exp;
branches;
next	1.3;

1.3
date	2002.02.12.02.19.43;	author goodger;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.07.01.59.59;	author goodger;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.06.03.01.46;	author goodger;	state Exp;
branches;
next	;


desc
@@


1.4
log
@reordered transforms
@
text
@#! /usr/bin/env python

"""
:Authors: David Goodger
:Contact: goodger@@users.sourceforge.net
:Revision: $Revision: 1.3 $
:Date: $Date: 2002/02/12 02:19:43 $
:Copyright: This module has been placed in the public domain.

Standalone file Reader for the reStructuredText markup syntax.
"""

__docformat__ = 'reStructuredText'

__all__ = ['Reader']


import sys
from dps import readers
from dps.transforms import frontmatter, references
try:
    from restructuredtext import Parser
except ImportError:
    from dps.parsers.restructuredtext import Parser


class Reader(readers.Reader):

    document = None
    """A single document tree."""

    transforms = (references.Substitutions,
                  frontmatter.DocTitle,
                  frontmatter.DocInfo,
                  references.Footnotes,
                  references.Hyperlinks,)

    def scan(self):
        self.input = self.scanfile(self.source)
@


1.3
log
@rearranged logic
@
text
@d6 2
a7 2
:Revision: $Revision: 1.2 $
:Date: $Date: 2002/02/07 01:59:59 $
d32 2
a33 1
    transforms = (frontmatter.DocTitle,
a34 1
                  references.Hyperlinks,
d36 1
a36 1
                  references.Substitutions,)
@


1.2
log
@progress
@
text
@d6 2
a7 2
:Revision: $Revision: 1.1 $
:Date: $Date: 2002/02/06 03:01:46 $
d38 2
a39 2
    def scan(self, source):
        self.scanfile(source)
@


1.1
log
@*** empty log message ***
@
text
@d6 2
a7 2
:Revision: $Revision:$
:Date: $Date:$
d32 5
a36 16
    def scan(self):
        if self.source:
            self.input = open(self.source).read()
        else:
            self.input = sys.stdin.read()

    def parse(self, parser):
        self.document = self.newdocument()
        parser.parse(self.input, self.document)

    def transform(self):
        frontmatter.DocTitle().transform(self.document)
        frontmatter.DocInfo().transform(self.document)
        references.Hyperlinks().transform(self.document)
        references.Footnotes().transform(self.document)
        references.Substitutions().transform(self.document)
d38 2
a39 2
    def getdocument(self):
        return self.document
@

